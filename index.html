<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ูุฑูุดฺฏุงู ุฏูุง ฺฉูุด ูุฑุฒุงุฒุงุฏู</title>
    <meta name="description" content="ูุฑูุดฺฏุงู ฺฉูุดโูุง ุชฺฉโุณุงุฒ ูุฑุฒุงุฒุงุฏู - ุชุจุฑุฒ" />
    
    <!-- Fonts: Vazirmatn -->
    <link href="https://cdn.jsdelivr.net/npm/vazirmatn@33.0.3/Vazirmatn-font-face.css" rel="stylesheet" type="text/css" />
    <!-- Icons: FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    
    <!-- Supabase CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.js"></script>
    
    <link rel="stylesheet" href="style.css?v=1.0.0" />
  </head>
  <body>
    <!-- Header -->
    <header>
      <div class="header-content">
        <div class="titles">
          <h1>ูุฑูุดฺฏุงู ุฏูุง ฺฉูุด ูุฑุฒุงุฒุงุฏู</h1>
          <p class="subtitle">ฺฉูุดโูุง ุชฺฉโุณุงุฒ</p>
        </div>
        <div class="header-actions">
          <button id="admin-login-btn" class="btn-secondary">ูุฑูุฏ ูุฏุฑ</button>
          <button id="logout-btn" class="btn-danger hidden">ุฎุฑูุฌ</button>
        </div>
      </div>
    </header>

    <!-- Notifications Container -->
    <div id="notification-area"></div>

    <!-- MAIN PAGE: Gallery & Filters -->
    <main id="home-page">
      <section class="filters-section">
        <div class="filters-container">
          <!-- Search Box -->
          <div class="filter-group search-group">
            <label for="search-id"><i class="fa-solid fa-magnifying-glass"></i> ุฌุณุชุฌู:</label>
            <div class="input-wrapper">
              <input type="number" id="search-id" placeholder="ุดูุงุณู ูุญุตูู..." />
            </div>
          </div>

          <div class="filter-group">
            <label for="filter-size"><i class="fa-solid fa-ruler"></i> ุณุงุฒ:</label>
            <div class="select-wrapper">
              <select id="filter-size">
                <option value="">ููู ุณุงุฒูุง</option>
                <!-- Dynamically populated -->
              </select>
            </div>
          </div>
          <div class="filter-group">
            <label for="filter-gender"><i class="fa-solid fa-user-group"></i> ุฌูุณุช:</label>
            <div class="select-wrapper">
              <select id="filter-gender">
                <option value="">ููู</option>
                <!-- Dynamically populated -->
              </select>
            </div>
          </div>
        </div>
      </section>

      <!-- Instructional Banner -->
      <div class="instruction-banner">
        <span class="instruction-text">ุฌูุช ูุดุงูุฏู ุชุตูุฑ ุจุฒุฑฺฏุชุฑ ุฑู ูุญุตูู ฺฉูฺฉ ฺฉูุฏ</span>
      </div>

      <section class="gallery-section">
        <div id="products-grid" class="grid">
          <!-- Products will be injected here -->
          <div class="loading">
            <div class="loading-spinner"></div>
            <p>ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ ูุญุตููุงุช...</p>
          </div>
        </div>
        
        <!-- Infinite Scroll Loader -->
        <div id="scroll-loader" class="scroll-loader hidden">
          <div class="loading-spinner small-spinner"></div>
          <span>ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ ุจุดุชุฑ...</span>
        </div>
      </section>
    </main>

    <!-- IMAGE PREVIEW MODAL -->
    <div id="image-modal" class="modal">
        <div class="modal-overlay" id="modal-overlay"></div>
        <div class="modal-content">
            <button id="modal-close" class="modal-close-btn"><i class="fa-solid fa-xmark"></i></button>
            <img id="modal-image" src="" alt="ูพุดโููุงุด ูุญุตูู" />
            <div class="modal-actions">
                <a id="modal-download" href="#" download="shoe-image.png" class="btn-primary" target="_blank">
                    <i class="fa-solid fa-download"></i> ุฏุงูููุฏ ุชุตูุฑ
                </a>
            </div>
        </div>
    </div>

    <!-- ADMIN LOGIN PAGE -->
    <main id="login-page" class="hidden">
      <div class="login-wrapper">
        <div class="login-card">
          <div class="login-header">
            <div class="login-icon">
                <i class="fa-solid fa-user-shield"></i>
            </div>
            <h2>ูุฑูุฏ ุจู ูพูู ูุฏุฑุช</h2>
            <p>ูุทูุง ุจุฑุง ุฏุณุชุฑุณ ูุงุฑุฏ ุดูุฏ</p>
          </div>
          <form id="login-form">
            <div class="form-group">
              <label>ูุงู ฺฉุงุฑุจุฑ</label>
              <div class="input-icon-wrapper">
                <i class="fa-solid fa-user"></i>
                <input type="text" id="username" required placeholder="ูุงู ฺฉุงุฑุจุฑ ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ" />
              </div>
            </div>
            <div class="form-group">
              <label>ุฑูุฒ ุนุจูุฑ</label>
              <div class="input-icon-wrapper">
                <i class="fa-solid fa-lock"></i>
                <input type="password" id="password" required placeholder="โขโขโขโขโขโข" />
              </div>
            </div>
            <div class="form-actions">
              <button type="submit" class="btn-primary full-width login-btn">
                ูุฑูุฏ ุจู ุณุณุชู <i class="fa-solid fa-arrow-left"></i>
              </button>
              <button type="button" id="back-to-home" class="btn-text full-width">ุจุงุฒฺฏุดุช ุจู ูุฑูุดฺฏุงู</button>
            </div>
          </form>
        </div>
      </div>
    </main>

    <!-- ADMIN DASHBOARD -->
    <main id="admin-dashboard" class="hidden">
      <div class="dashboard-header">
        <div class="dashboard-title">
          <h2>ูพูู ูุฏุฑุช</h2>
          <p>ูุฏุฑุช ูุญุตููุงุช ู ุชูุธูุงุช ูุฑูุดฺฏุงู</p>
        </div>
        <div id="tracker-status" class="tracker-box">
          <div class="tracker-icon"><i class="fa-solid fa-clock-rotate-left"></i></div>
          <div class="tracker-info">
            <span>ูุถุนุช ุจูโุฑูุฒุฑุณุงู</span>
            <span id="tracker-text" class="tracker-value">...</span>
            <span id="tracker-date" class="tracker-date-sub"></span>
          </div>
          <button id="update-tracker-btn" class="btn-small btn-outline">ุจูโุฑูุฒุฑุณุงู</button>
        </div>
      </div>

      <div class="admin-container">
        <div class="admin-tabs">
          <button class="tab-btn active" data-tab="tab-upload">
            <span class="icon">๏ผ</span> ุงูุฒูุฏู ูุญุตูู
          </button>
          <button class="tab-btn" data-tab="tab-products">
            <span class="icon">๐ฆ</span> ูุฏุฑุช ูุญุตููุงุช
          </button>
          <button class="tab-btn" data-tab="tab-sizes">
            <span class="icon">๐</span> ุณุงุฒูุง
          </button>
          <button class="tab-btn" data-tab="tab-genders">
            <span class="icon">๐ฅ</span> ุฌูุณุชโูุง
          </button>
        </div>

        <div class="tab-content">
          <!-- Tab: Upload Product -->
          <div id="tab-upload" class="tab-pane active">
            <div class="form-card">
              <h3>ุงูุฒูุฏู ูุญุตูู ุฌุฏุฏ</h3>
              
              <!-- API Key Configuration -->
              <div class="api-config-box">
                <label for="ai-api-key" class="text-small">ฺฉูุฏ API ุญุฐู ูพุณโุฒููู (Remove.bg):</label>
                <input type="password" id="ai-api-key" placeholder="ฺฉูุฏ API ุฑุง ุงูุฌุง ูุงุฑุฏ ฺฉูุฏ..." />
              </div>

              <form id="add-product-form">
                <div class="form-row">
                  <div class="form-group full">
                    <label>ุชุตูุฑ ฺฉูุด</label>
                    <div class="file-input-wrapper">
                      <input type="file" id="product-image" accept="image/*" required />
                      <div class="file-cta">
                        <i class="fa-solid fa-cloud-arrow-up"></i>
                        <span>ุงูุชุฎุงุจ ุชุตูุฑ</span>
                      </div>
                    </div>
                    
                    <!-- AI Edit Feature -->
                    <div id="image-preview-container" class="hidden">
                        <img id="image-preview" src="" alt="ูพุดโููุงุด" class="preview-img" />
                        <div class="ai-actions">
                            <button type="button" id="ai-edit-btn" class="btn-ai">
                                <i class="fa-solid fa-wand-magic-sparkles"></i> ูุฑุงุด ููุดููุฏ (ุญุฐู ูพุณโุฒููู)
                            </button>
                            <button type="button" id="compress-btn" class="btn-secondary full-width" disabled>
                                <i class="fa-solid fa-compress"></i> ูุดุฑุฏูโุณุงุฒ ุชุตูุฑ (ุจุนุฏ ุงุฒ AI)
                            </button>
                        </div>
                    </div>
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label>ููุช (ุชููุงู)</label>
                    <input type="number" id="product-price" required placeholder="ูุซูุง: 500000" />
                  </div>
                  <div class="form-group">
                    <label>ุณุงุฒ</label>
                    <div class="select-wrapper">
                      <select id="product-size" required></select>
                    </div>
                  </div>
                  <div class="form-group">
                    <label>ุฌูุณุช</label>
                    <div class="select-wrapper">
                      <select id="product-gender" required></select>
                    </div>
                  </div>
                </div>
                <div class="form-footer">
                  <button type="submit" class="btn-success large-btn">ุซุจุช ูุญุตูู</button>
                </div>
              </form>
            </div>
          </div>

          <!-- Tab: Manage Products -->
          <div id="tab-products" class="tab-pane">
            <div class="table-card">
              <div class="table-header">
                <h3>ูุณุช ูุญุตููุงุช</h3>
                <div class="admin-search-box">
                    <input type="number" id="admin-search-id" placeholder="ุฌุณุชุฌู ุจุง ุดูุงุณู..." />
                </div>
              </div>
              <div class="table-responsive">
                <table id="products-table">
                  <thead>
                    <tr>
                      <th>ุชุตูุฑ</th>
                      <th>ID</th>
                      <th class="col-price">ููุช (ุชููุงู)</th>
                      <th>ุณุงุฒ</th>
                      <th>ุฌูุณุช</th>
                      <th>ุนููุงุช</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
              <div class="load-more-container">
                  <button id="admin-load-more-btn" class="btn-secondary full-width hidden">ููุงุด ุจุดุชุฑ</button>
              </div>
            </div>
          </div>

          <!-- Tab: Manage Sizes -->
          <div id="tab-sizes" class="tab-pane">
            <div class="manage-card">
              <h3>ูุฏุฑุช ุณุงุฒูุง</h3>
              <div class="inline-form">
                <input type="text" id="new-size-val" placeholder="ุณุงุฒ ุฌุฏุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ" />
                <button id="add-size-btn" class="btn-primary">ุงูุฒูุฏู</button>
              </div>
              
              <!-- Bulk Actions Toolbar -->
              <div class="bulk-actions-toolbar hidden" id="sizes-bulk-toolbar">
                <div class="bulk-info">
                    <input type="checkbox" id="select-all-sizes" class="custom-checkbox">
                    <label for="select-all-sizes">ุงูุชุฎุงุจ ููู</label>
                </div>
                <button id="delete-selected-sizes" class="btn-danger btn-small hidden">
                    <i class="fa-solid fa-trash"></i> ุญุฐู ุงูุชุฎุงุจ ุดุฏูโูุง
                </button>
              </div>

              <ul id="sizes-list" class="manage-list grid-list"></ul>
            </div>
          </div>

          <!-- Tab: Manage Genders -->
          <div id="tab-genders" class="tab-pane">
            <div class="manage-card">
              <h3>ูุฏุฑุช ุฌูุณุชโูุง</h3>
              <div class="inline-form">
                <input type="text" id="new-gender-val" placeholder="ุฌูุณุช ุฌุฏุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ" />
                <button id="add-gender-btn" class="btn-primary">ุงูุฒูุฏู</button>
              </div>

              <!-- Bulk Actions Toolbar -->
              <div class="bulk-actions-toolbar hidden" id="genders-bulk-toolbar">
                <div class="bulk-info">
                    <input type="checkbox" id="select-all-genders" class="custom-checkbox">
                    <label for="select-all-genders">ุงูุชุฎุงุจ ููู</label>
                </div>
                <button id="delete-selected-genders" class="btn-danger btn-small hidden">
                    <i class="fa-solid fa-trash"></i> ุญุฐู ุงูุชุฎุงุจ ุดุฏูโูุง
                </button>
              </div>

              <ul id="genders-list" class="manage-list grid-list"></ul>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer>
      <div class="footer-content">
        <div class="footer-info">
          <p class="footer-address"><i class="fa-solid fa-location-dot"></i> <strong>ุขุฏุฑุณ:</strong> ุชุจุฑุฒุ ุฌุงุฏู ุขุฐุฑุดูุฑุ ุฏูุง ฺฉูุด ูุฑุฒุงุฒุงุฏู</p>
          <p class="footer-phone">
            <i class="fa-solid fa-phone"></i> 
            <strong>ุดูุงุฑู ุชูุงุณ:</strong> 
            <a href="tel:09023394942" class="phone-link">09023394942</a>
          </p>
        </div>
        <div class="footer-copy">
          &copy; 2025 ูุฑูุดฺฏุงู ูุฑุฒุงุฒุงุฏู. ุชูุงู ุญููู ูุญููุธ ุงุณุช.
        </div>
      </div>
    </footer>

    <script src="main.js?v=1.0.2"></script>
  </body>
</html>
